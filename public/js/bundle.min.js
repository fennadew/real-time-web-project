"use strict";

(function () {
    function r(e, n, t) {
        function o(i, f) {
            if (!n[i]) {
                if (!e[i]) {
                    var c = "function" == typeof require && require;if (!f && c) return c(i, !0);if (u) return u(i, !0);var a = new Error("Cannot find module '" + i + "'");throw a.code = "MODULE_NOT_FOUND", a;
                }var p = n[i] = { exports: {} };e[i][0].call(p.exports, function (r) {
                    var n = e[i][1][r];return o(n || r);
                }, p, p.exports, r, e, n, t);
            }return n[i].exports;
        }for (var u = "function" == typeof require && require, i = 0; i < t.length; i++) {
            o(t[i]);
        }return o;
    }return r;
})()({ 1: [function (require, module, exports) {}, {}], 2: [function (require, module, exports) {
        var nextStationInput = document.getElementById('nextStation');
        var nextList = document.querySelector(".nextstation-autocomplete");
        var lastStationInput = document.getElementById('lastStation');
        var lastList = document.querySelector(".laststation-autocomplete");
        var loader = document.querySelector('.loader');

        if (nextStationInput && nextStationInput.addEventListener) {
            var showList = function showList(input, list) {
                input.addEventListener("input", function () {
                    loader.classList.remove('hidden');
                    fetch('/api?nextStation=' + input.value).then(function (response) {
                        return response.json();
                    }).then(function (myJson) {
                        loader.classList.add('hidden');
                        createList(myJson, input, list);
                    });
                });
            };

            var createList = function createList(data, input, list) {
                clearList(list);

                var val = input.value;
                if (val.length > 0) {
                    var _loop = function _loop(i) {
                        if (data[i].name.substr(0, val.length).toUpperCase() === val.toUpperCase()) {
                            var listItem = document.createElement("div");
                            listItem.classList.add("autocomplete-items");
                            listItem.innerHTML = "<b>" + data[i].name.substr(0, val.length) + "</b>";
                            listItem.innerHTML += data[i].name.substr(val.length);
                            listItem.addEventListener("click", function (e) {
                                return function () {
                                    input.value = data[i].name;
                                    clearList(list);
                                };
                            }(i));
                            list.appendChild(listItem);
                        }
                    };

                    for (var i = 0; i < data.length; i++) {
                        _loop(i);
                    }
                }
            };

            var clearList = function clearList(list) {
                var elements = document.getElementsByClassName("autocomplete-items");
                if (elements) {
                    while (list.firstChild) {
                        list.removeChild(list.firstChild);
                    }
                }
            };

            showList(nextStationInput, nextList);
            showList(lastStationInput, lastList);
        }
    }, {}] }, {}, [1, 2]);
